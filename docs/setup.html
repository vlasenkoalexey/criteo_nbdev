---

title: Title

keywords: fastai
sidebar: home_sidebar

summary: "summary"
description: "summary"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: setup.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">gcp_runner.core</span>
<span class="n">gcp_runner</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">export_and_reload_all</span><span class="p">(</span><span class="n">silent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Configure-Google-Cloud-SDK">Configure Google Cloud SDK<a class="anchor-link" href="#Configure-Google-Cloud-SDK"> </a></h1><h2 id="Install-Google-Cloud-SDK">Install Google Cloud SDK<a class="anchor-link" href="#Install-Google-Cloud-SDK"> </a></h2><p>See <a href="https://cloud.google.com/sdk/docs/downloads-interactive">https://cloud.google.com/sdk/docs/downloads-interactive</a></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>curl https://sdk.cloud.google.com &gt; install.sh
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   443  100   443    0     0   3545      0 --:--:-- --:--:-- --:--:--  3572
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>bash install.sh --disable-prompts
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Downloading Google Cloud SDK install script: https://dl.google.com/dl/cloudsdk/channels/rapid/install_google_cloud_sdk.bash
######################################################################## 100.0%
Running install script from: /var/folders/0c/_9t2rb612zq01d325yh__5ph0069sb/T/tmp.XXXXXXXXXX.NqjaQrCj/install_google_cloud_sdk.bash
which curl
curl -# -f https://dl.google.com/dl/cloudsdk/channels/rapid/google-cloud-sdk.tar.gz
######################################################################## 100.0%                      4.5%     5.6%   17.6%                                30.6%                  48.7%############                  78.5%################                 80.5%

mkdir -p /Users/alekseyv
&#34;/Users/alekseyv/google-cloud-sdk&#34; already exists and may contain out of date files.
Remove /Users/alekseyv/google-cloud-sdk or select a new installation directory, then run again.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Configure-Project">Configure Project<a class="anchor-link" href="#Configure-Project"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>gcloud init
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span> <span class="nv">$PROJECT_ID</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>alekseyv-scalableai-dev
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>gcloud config <span class="nb">set</span> project <span class="nv">$PROJECT_ID</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Updated property [core/project].
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>gcloud services <span class="nb">enable</span> bigquery.googleapis.com
<span class="o">!</span>gcloud services <span class="nb">enable</span> bigquerystorage.googleapis.com
<span class="o">!</span>gcloud services <span class="nb">enable</span> container.googleapis.com
<span class="o">!</span>gcloud services <span class="nb">enable</span> ml.googleapis.com
<span class="o">!</span>gcloud services <span class="nb">enable</span> storage-api.googleapis.com
<span class="o">!</span>gcloud services <span class="nb">enable</span> storage-component.googleapis.com
<span class="o">!</span>gcloud services <span class="nb">enable</span> tpu.googleapis.com
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Download-and-configure-service-account-key">Download and configure service account key<a class="anchor-link" href="#Download-and-configure-service-account-key"> </a></h2><p>See <a href="https://cloud.google.com/iam/docs/creating-managing-service-account-keys#iam-service-account-keys-create-gcloud">https://cloud.google.com/iam/docs/creating-managing-service-account-keys#iam-service-account-keys-create-gcloud</a></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">user_name</span> <span class="o">=</span> <span class="o">!</span><span class="nb">echo</span> <span class="nv">$USER</span>
<span class="n">iam_account</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{user_name}</span><span class="s1">-service@</span><span class="si">{project_id}</span><span class="s1">.iam.gserviceaccount.com&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">user_name</span><span class="o">=</span><span class="n">user_name</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">project_id</span><span class="o">=</span><span class="n">PROJECT_ID</span><span class="p">)</span>
<span class="n">iam_account</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;alekseyv-service@alekseyv-scalableai-dev.iam.gserviceaccount.com&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>gcloud iam service-accounts keys create ./<span class="nv">$SERVICE_ACCOUNT_KEY_FILE_NAME</span> --iam-account<span class="o">=</span><span class="nv">$iam_account</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>created key [7754ec6da57f9f5c55a471209c34b0fb640c1fa1] of type [json] as [./service_account_key.json] for [alekseyv-service@alekseyv-scalableai-dev.iam.gserviceaccount.com]
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>gsutil cp ./<span class="nv">$SERVICE_ACCOUNT_KEY_FILE_NAME</span> <span class="nv">$PRIVATE_GCS_BUCKET</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Copying file://./service_account_key.json [Content-Type=application/json]...
- [1 files][  2.3 KiB/  2.3 KiB]                                                
Operation completed over 1 objects/2.3 KiB.                                      
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>curl https://raw.githubusercontent.com/grpc/grpc/master/etc/roots.pem -o ./roots.pem
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  277k  100  277k    0     0   110k      0  0:00:02  0:00:02 --:--:--  110k
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>ls
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>00_core.ipynb            MANIFEST.in              roots.pem
01_constants.ipynb       Makefile                 service_account_key.json
02_data_download.ipynb   README.md                settings.ini
03_data_import.ipynb     <span class="ansi-blue-fg">criteo_nbdev</span>             setup.ipynb
04_data_reader.ipynb     <span class="ansi-blue-fg">docs</span>                     setup.py
CONTRIBUTING.md          index.ipynb
LICENSE                  install.sh
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Install-other-dependencies">Install other dependencies<a class="anchor-link" href="#Install-other-dependencies"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>pip install google-cloud
<span class="o">!</span>pip install google-cloud-bigquery
<span class="o">!</span>pip install matplotlib
<span class="o">!</span>pip install tensorflow-gpu
<span class="o">!</span>pip install --no-deps tensorflow-io
<span class="o">!</span>pip install --no-deps tensorflow-addons
<span class="o">!</span>pip install keras-tuner
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Configure-Kubernetes-(Optional)">Configure Kubernetes (Optional)<a class="anchor-link" href="#Configure-Kubernetes-(Optional)"> </a></h2><p>If you plan to run sample on Google Cloud Kubernetes, you need to create a cluster, and configure it.</p>
<p>In Google Cloud Console for your project, navigate to Kubernetes page and create a cluster. 
Here you can select number of nodes, CPU, memory, and HDD size for each node.
You can also attach GPUs and TPUs.</p>
<p>Same can be achieved using <code>gcloud beta container clusters create</code> command, but it usually easier to do it from Console.</p>
<p>Once your cluster is created run following command to configure Google Cloud SDK to use it:</p>
<div class="highlight"><pre><span></span>gcloud container clusters get-credentials &lt;cluster name&gt; --region<span class="o">=</span>&lt;region name&gt;
</pre></div>
<p>If you plan to use GPUs, you also need to install NVIDIA drivers:
<a href="https://cloud.google.com/kubernetes-engine/docs/how-to/gpus#installing_drivers">https://cloud.google.com/kubernetes-engine/docs/how-to/gpus#installing_drivers</a></p>
<div class="highlight"><pre><span></span>kubectl apply -f https://raw.githubusercontent.com/GoogleCloudPlatform/container-engine-accelerators/master/nvidia-driver-installer/cos/daemonset-preloaded.yaml
</pre></div>
<p>If you want to use TPUs, you'll need to grant TPU permission to your service account.</p>
<p>Follow this instructions:
<a href="https://cloud.google.com/tpu/docs/kubernetes-engine-setup">https://cloud.google.com/tpu/docs/kubernetes-engine-setup</a>
<a href="https://cloud.google.com/ml-engine/docs/tensorflow/using-tpus">https://cloud.google.com/ml-engine/docs/tensorflow/using-tpus</a></p>

</div>
</div>
</div>
</div>
 

